(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77da1ce8"],{"26b6":function(e,t,i){},6999:function(e,t,i){"use strict";i("99e4")},"99e4":function(e,t,i){},c66d:function(e,t,i){"use strict";i.r(t);var a=i("7a23"),l=function(e){return Object(a["u"])("data-v-31be40bc"),e=e(),Object(a["s"])(),e},o={id:"app",class:"app-profile"},n={class:"container welcom"},r={key:0,class:"title"},c={class:"container profile-infos"},s={class:"row background-profile"},u={class:"col-md-4 img-content"},d={class:"img-profile"},m={for:"file-input"},p={class:"col-md-8 navbar-profile"},f={class:"nav"},b={class:"navbar-item item-modify"},g=l((function(){return Object(a["g"])("i",{class:"fa-solid fa-pen",id:"icon"},null,-1)})),j=[g],O={class:"bloc"},h=l((function(){return Object(a["g"])("div",{class:"overlay"},null,-1)})),v={class:"bloc-form"},y=l((function(){return Object(a["g"])("i",{class:"far fa-times-circle fa-2x modaleBloc__card__title__close"},null,-1)})),_=[y],w={class:"form-content"},P={class:"form-color"},I=l((function(){return Object(a["g"])("h2",null,"Informations personnelles",-1)})),B={class:"form-input row"},S={class:"bloc-upload-img"},C=l((function(){return Object(a["g"])("label",{for:"form-file-input",class:"form-img-profile label-img-profile"},[Object(a["g"])("i",{class:"fa-solid fa-file-arrow-up"}),Object(a["g"])("p",null,"Changer ma photo de profil")],-1)})),F={class:"bloc-upload-img"},k=["src"],D={class:"form-input row"},A=l((function(){return Object(a["g"])("label",{class:"col-md-4",for:"username"},"Pseudo: ",-1)})),x={class:"form-input row"},G=l((function(){return Object(a["g"])("label",{class:"col-md-4",for:"lastname"},"Nom: ",-1)})),M={class:"form-input row"},U=l((function(){return Object(a["g"])("label",{class:"col-md-4",for:"firstname"},"Prénom: ",-1)})),V={class:"form-input row"},z=l((function(){return Object(a["g"])("label",{class:"col-md-4",for:"bio"},"Bio :",-1)})),E={class:"form-input row"},T=l((function(){return Object(a["g"])("label",{class:"col-md-4",for:"email"},"Email: ",-1)})),N={class:"delete-account row"},J=Object(a["h"])(" Supprimer mon compte"),L={class:"row profile-content"},R={class:"col-md-6 profile-cart"},$={class:"name"};function H(e,t,i,l,g,y){var H=Object(a["y"])("Navbar"),q=Object(a["y"])("ProfileImage"),K=Object(a["y"])("DeleteAccount");return Object(a["r"])(),Object(a["f"])("div",o,[Object(a["i"])(H),Object(a["g"])("div",n,[g.user?(Object(a["r"])(),Object(a["f"])("h1",r,"Bienvenue "+Object(a["A"])(g.user.username)+" !",1)):Object(a["e"])("",!0)]),Object(a["g"])("div",c,[Object(a["g"])("div",s,[Object(a["g"])("div",u,[Object(a["g"])("div",d,[Object(a["g"])("input",{type:"file",ref:"uploadFile",name:"image",onChange:t[0]||(t[0]=function(){return y.onFileSelected&&y.onFileSelected.apply(y,arguments)}),accept:"image/*",id:"file-input","aria-label":"Modifier ma photo de profil"},null,544),Object(a["g"])("label",m,[Object(a["i"])(q,{src:g.user.imageProfile,class:"profile__photo__image"},null,8,["src"])])])]),Object(a["g"])("div",p,[Object(a["g"])("nav",null,[Object(a["g"])("ul",f,[Object(a["g"])("li",b,[Object(a["g"])("div",{onClick:t[1]||(t[1]=function(){return y.displayModify&&y.displayModify.apply(y,arguments)})},j)])])])]),Object(a["G"])(Object(a["g"])("div",O,[h,Object(a["g"])("div",v,[Object(a["g"])("div",{onClick:t[2]||(t[2]=function(){return y.displayModify&&y.displayModify.apply(y,arguments)}),class:"icon-bloc-close"},_),Object(a["g"])("div",w,[Object(a["g"])("div",P,[I,Object(a["g"])("form",{onSubmit:t[11]||(t[11]=Object(a["H"])((function(){return e.onSubmit&&e.onSubmit.apply(e,arguments)}),["prevent"]))},[Object(a["g"])("div",B,[Object(a["G"])(Object(a["g"])("div",S,[C,Object(a["g"])("input",{type:"file",ref:"uploadFormFile",name:"image",onChange:t[3]||(t[3]=function(){return y.onFormFileSelected&&y.onFormFileSelected.apply(y,arguments)}),accept:"image/*",id:"form-file-input","aria-label":"Modifier ma photo de profil"},null,544)],512),[[a["D"],g.showInput]]),Object(a["G"])(Object(a["g"])("div",F,[Object(a["g"])("img",{id:"image",src:g.newImageProfile,alt:"image du message"},null,8,k)],512),[[a["D"],g.imgPreview]])]),Object(a["g"])("div",D,[A,Object(a["G"])(Object(a["g"])("input",{class:"col-md-8",type:"text",name:"username",id:"username","onUpdate:modelValue":t[4]||(t[4]=function(e){return g.username=e})},null,512),[[a["C"],g.username]])]),Object(a["g"])("div",x,[G,Object(a["G"])(Object(a["g"])("input",{class:"col-md-8",type:"text",name:"lastname",id:"lastname","onUpdate:modelValue":t[5]||(t[5]=function(e){return g.lastname=e})},null,512),[[a["C"],g.lastname]])]),Object(a["g"])("div",M,[U,Object(a["G"])(Object(a["g"])("input",{class:"col-md-8",type:"text",name:"firstname",id:"firstname","onUpdate:modelValue":t[6]||(t[6]=function(e){return g.firstname=e})},null,512),[[a["C"],g.firstname]])]),Object(a["g"])("div",V,[z,Object(a["G"])(Object(a["g"])("input",{class:"col-md-8",type:"text",name:"bio",id:"bio","onUpdate:modelValue":t[7]||(t[7]=function(e){return g.bio=e})},null,512),[[a["C"],g.bio]])]),Object(a["g"])("div",E,[T,Object(a["G"])(Object(a["g"])("input",{class:"col-md-8",type:"text",name:"email",id:"email","onUpdate:modelValue":t[8]||(t[8]=function(e){return g.email=e})},null,512),[[a["C"],g.email]])]),Object(a["g"])("button",{onClick:t[9]||(t[9]=function(){return y.updateProfile&&y.updateProfile.apply(y,arguments)}),class:"btn form-btn"},"Enregistrer"),Object(a["g"])("div",N,[Object(a["g"])("button",{onClick:t[10]||(t[10]=function(){return y.deleteProfile&&y.deleteProfile.apply(y,arguments)}),class:"btn display btn-danger"},[Object(a["i"])(K,{display:g.display,displayDeleteBloc:e.displayDeleteBloc,id:"displayDeleteBloc"},null,8,["display","displayDeleteBloc"]),J])])],32)])])])],512),[[a["D"],g.revele]])]),Object(a["g"])("div",L,[Object(a["g"])("div",R,[Object(a["g"])("p",$,Object(a["A"])(g.user.lastname)+" "+Object(a["A"])(g.user.firstname),1),Object(a["g"])("p",null,"Username: "+Object(a["A"])(g.user.username),1),Object(a["g"])("p",null,"Bio : "+Object(a["A"])(g.user.bio),1),Object(a["g"])("p",null,"Email: "+Object(a["A"])(g.user.email),1)])])])])}i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861");var q=i("bc3a"),K=i.n(q),Q=i("b6d0"),W=(i("71a2"),i("d178")),X=i("89e6"),Y=function(e){return Object(a["u"])("data-v-58e36f82"),e=e(),Object(a["s"])(),e},Z={key:0,class:"modaleBloc"},ee={class:"modaleBloc__card"},te={class:"modaleBloc__card__title"},ie=Y((function(){return Object(a["g"])("h2",null,"Etes-vous sûr de vouloir supprimer votre compte ?",-1)})),ae=Y((function(){return Object(a["g"])("p",null,"(Cette action est irréversible)",-1)})),le={class:"modaleBloc__card__title__close"};function oe(e,t,i,l,o,n){return i.display?(Object(a["r"])(),Object(a["f"])("div",Z,[Object(a["g"])("div",{onClick:t[0]||(t[0]=function(){return i.displayDeleteBloc&&i.displayDeleteBloc.apply(i,arguments)}),class:"modaleBloc__overlay"}),Object(a["g"])("div",ee,[Object(a["g"])("div",te,[ie,ae,Object(a["g"])("div",le,[Object(a["g"])("i",{onClick:t[1]||(t[1]=function(){return i.displayDeleteBloc&&i.displayDeleteBloc.apply(i,arguments)}),class:"far fa-times-circle fa-2x modaleBloc__card__title__close"})])]),Object(a["g"])("button",{onClick:t[2]||(t[2]=function(){return n.deleteAccount&&n.deleteAccount.apply(n,arguments)}),class:"modaleBloc__card__button"},"Oui, je supprime mon compte")])])):Object(a["e"])("",!0)}var ne={name:"DeleteAccount",props:["display","displayDeleteBloc"],created:function(){this.notyf=new Q["a"]({duration:2e3,position:{x:"center",y:"bottom"}})},methods:{deleteAccount:function(){var e=this,t=localStorage.getItem("userId");K.a.delete("http://localhost:3000/api/users/profile/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(){e.notyf.success("Votre compte a bien été supprimé"),localStorage.clear(),e.$router.push("/")})).catch((function(t){var i=t.response.data;e.notyf.error(i.error)}))}}},re=(i("6999"),i("6b0d")),ce=i.n(re);const se=ce()(ne,[["render",oe],["__scopeId","data-v-58e36f82"]]);var ue=se,de={name:"Profile",components:{Navbar:W["a"],ProfileImage:X["a"],DeleteAccount:ue},data:function(){return{display:!1,revele:!1,user:"",username:"",lastname:"",firstname:"",bio:"",email:"",imageProfile:null,bloc:!1,showInput:!0,imgPreview:!1,newImageProfile:""}},created:function(){this.displayProfile(),this.notyf=new Q["a"]({duration:4e3,position:{x:"center",y:"bottom"}})},methods:{displayProfile:function(){var e=this,t=localStorage.getItem("userId");K.a.get("http://localhost:3000/api/users/profile/"+t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.user=t.data.user,localStorage.setItem("imageProfile",e.user.imageProfile),console.log(e.user)})).catch((function(t){var i=t.response.data;e.notyf.error(i.error)}))},displayModify:function(){this.revele=!this.revele,this.username=this.user.username,this.lastname=this.user.lastname,this.firstname=this.user.firstname,this.bio=this.user.bio,this.email=this.user.email},onFileSelected:function(e){this.$refs.uploadFile.click(),this.imageProfile=e.target.files[0],this.imageProfile&&this.uploadImgProfile()},uploadImgProfile:function(){var e=this,t=localStorage.getItem("userId");this.email=localStorage.getItem("email");var i=new FormData;console.log(this.email),i.append("image",this.imageProfile),i.append("email",this.email),K.a.put("http://localhost:3000/api/users/profile/"+t,i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){var t=e.data.userFound.imageProfile;localStorage.setItem("imageProfile",t),console.log(e.data),window.location.reload()})).catch((function(t){var i=t.res.data;e.notyf.error(i.error)}))},onFormFileSelected:function(e){this.imageProfile=e.target.files[0],console.log(this.imageProfile),e.target.files.length>0&&(this.newImageProfile=URL.createObjectURL(e.target.files[0]),this.showInput=!this.showInput,this.imgPreview=!this.imgPreview)},uploadFormFile:function(){this.refs.uploadFormFile.click()},updateProfile:function(){var e=this,t=localStorage.getItem("userId"),i=new FormData;i.append("image",this.imageProfile),i.append("username",this.username),i.append("lastname",this.lastname),i.append("firstname",this.firstname),i.append("bio",this.bio),i.append("email",this.email),null==this.imageProfile&&""==this.username&&""==this.lastname&&""==this.firstname&&""==this.bio&&""==this.email?(console.log("Votre modification n'a pas pu être prise en compte !"),this.displayModify()):K.a.put("http://localhost:3000/api/users/profile/"+t,i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.user=t.data.user,window.location.reload()})).catch((function(t){var i=t.response.data;e.notyf.error(i.error)}))},deleteProfile:function(){this.display=!this.display}}};i("d700");const me=ce()(de,[["render",H],["__scopeId","data-v-31be40bc"]]);t["default"]=me},d700:function(e,t,i){"use strict";i("26b6")}}]);
//# sourceMappingURL=chunk-77da1ce8.bcd7e63d.js.map